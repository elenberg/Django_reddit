{% extends 'base.html' %}

{% block content %}

<div class="panel panel-default">
	<div class="panel-heading">
<h2>{{link.title}}</h2>
	</div>
	<div class="panel-body">
<p>
  {{link.description}} <br/>
</p>
	</div>
</div>
{% if user.is_authenticated%}
<p> Commenting as {{user.username}}</p>
<form action="" method="POST">
	
	<textarea name="new_comment" id="" cols="75" rows="10"> Link comment box</textarea>
	<hr/>
  <button value="l {{link.id}}" class="btn btn-primary btn-sm disabled" name="button"> Submit Comment</button>
    {% csrf_token %}
</form>
{%endif%}
<ul class="list-group">
	
{% for comment in comments %}
<li class="list-group-item">
     <span class="badge pull-left">{{comment.vote.all.count}}</span>
	{{comment.description}}
</li>
{% if user.is_authenticated%}
<p> Commenting as {{user.username}}</p>
<form action="" method="POST">
	
	<textarea name="new_comment" id="" cols="75" rows="10"> Link Reply Field</textarea>
	<hr/>
  <button value="c {{comment.id}}" class="btn btn-primary btn-sm disabled" name="button"> Submit Comment</button>
    {% csrf_token %}
</form>
{%endif%}
{% if comment.replies.all.exists == True  %}
<ul>
	
{% for reply in comment.replies.all%}
{%with comments=reply template_name="replies.html" %}
                   {%include template_name%}
              {%endwith%}
{% endfor %}
</ul>
{% endif %}
</ul>
{% endfor%}
{% endblock %}
